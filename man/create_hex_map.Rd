% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/hexmap.R
\name{create_hex_map}
\alias{create_hex_map}
\title{Create a hexagonal grid representation of spatial polygons}
\usage{
create_hex_map(
  sf_object,
  hex_size = 25000,
  min_coverage = 0.2,
  id_col = "geom_id",
  name_col = NULL
)
}
\arguments{
\item{sf_object}{An sf object containing the polygons to be transformed. Must be a valid sf object
with a geometry column of type POLYGON or MULTIPOLYGON.}

\item{hex_size}{Size of hexagonal cells in the same units as sf_object (e.g., meters for UTM).
Controls the resolution of the output grid.}

\item{min_coverage}{Minimum proportion (0-1) of a hex that must be covered by input geometries
for it to be included. Higher values remove partial edge hexes. Default 0.2.}

\item{id_col}{Character string naming the column in sf_object containing unique identifiers
for each polygon.}

\item{name_col}{Optional character string naming a column containing names or labels for
the polygons. These will be preserved in the output.}
}
\value{
A list with two elements:
\item{hex_sp}{An sf object containing the hexagonal grid. Each hex has attributes:
\itemize{
\item geom_ids: String of original polygon IDs contained in the hex
\item area_tot: Total area of intersection with original polygons
\item prop: Proportion of hex covered by original polygons
\item names: If name_col provided, concatenated names of contained polygons
}
}
\item{hex_links}{A data frame linking original polygon IDs to their hex assignments}
}
\description{
This function transforms irregular spatial polygons into a hexagonal grid representation,
useful for visualizing geographical patterns when dealing with polygons of vastly different sizes.
Small polygons are aggregated into single hexagons while large polygons can span multiple hexagons.
The function handles edge cases and ensures spatial relationships are maintained.
}
\examples{
\dontrun{
library(sf)
library(dplyr)

# Load example Swedish parish data (replace with your data)
parishes <- read_sf("parishes.shp") \%>\%
  mutate(parish_id = row_number(),
         name = parish_name)

# Create hexagonal representation with 25km hexes
result <- create_hex_map(
  sf_object = parishes,
  hex_size = 25000,  # 25km in projection units
  min_coverage = 0.2,
  id_col = "parish_id",
  name_col = "name"
)

# Plot the results
library(ggplot2)
ggplot(result$hex_sp) +
  geom_sf(aes(fill = geom_ids)) +
  theme_minimal() +
  theme(legend.position = "none") +
  ggtitle("Parish Hexagonal Representation")

# Check which parishes are in a specific hex
hex_assignments <- result$hex_links \%>\%
  group_by(id) \%>\%
  summarise(parishes = paste(parish_id, collapse = ", "))
}

}
\seealso{
\code{\link[sf]{st_make_grid}} for the underlying hex grid creation
}
